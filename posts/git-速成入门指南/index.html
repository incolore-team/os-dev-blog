<!DOCTYPE html>
<html lang="en" dir=>

<head>
  <meta name="generator" content="Hugo 0.80.0" />
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="由于网上的教程要么啰嗦，要么太过随意、太旧，所以写了这篇指南，尽可能取得实战能力、原理理解、学习效率的平衡。
什么是 Git？#Git 是一个文件管理工具，用于需要处理文件合并、更新等操作和这些操作的追踪。想象你在写一个程序，这个程序涉及到 A, B, C&hellip; 各个源代码文件，有一天，你修改了文件 C，然后重新发布了程序，突然你发现这个修改会导致严重的 BUG，你必须恢复到原来的文件，于是每次修改你都要把当时的源代码保存一遍，非常麻烦。或者假设有很多人帮助你开发这个程序，你就要手动合并他们提交的代码。有了 Git 之后，我们可以方便地管理代码的各个版本、管理其他人的合并等等。
前置知识#学习之前，你需要知道：
 常用的 Linux 命令 Vim 编辑器基本操作  注册一个 Github 账号#Github 是一个在线的代码托管平台，使用 Github 你可以将自己的代码推送到服务器，或者从服务器下载代码。类似的平台还有 Gitee、GitBucket、Bitbucket 等，他们都支持 Git。此外你也可以自己搭建一个代码托管服务器。
为了我们后面学习过程中方便演练各种操作，需要你注册一个 Github 账号，或者使用你有的账号。
访问 GitHub: Where the world builds software · GitHub，点击 Sign up 按钮进入注册页面，填写必要的信息进行注册。
安装 Git#我们以 Linux（Ubuntu）系统为例。执行：
$ sudo apt-get install git -y 进行安装。
配置用户信息#之后你需要配置用户信息。执行：">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="" />
<meta property="og:description" content="由于网上的教程要么啰嗦，要么太过随意、太旧，所以写了这篇指南，尽可能取得实战能力、原理理解、学习效率的平衡。
什么是 Git？#Git 是一个文件管理工具，用于需要处理文件合并、更新等操作和这些操作的追踪。想象你在写一个程序，这个程序涉及到 A, B, C&hellip; 各个源代码文件，有一天，你修改了文件 C，然后重新发布了程序，突然你发现这个修改会导致严重的 BUG，你必须恢复到原来的文件，于是每次修改你都要把当时的源代码保存一遍，非常麻烦。或者假设有很多人帮助你开发这个程序，你就要手动合并他们提交的代码。有了 Git 之后，我们可以方便地管理代码的各个版本、管理其他人的合并等等。
前置知识#学习之前，你需要知道：
 常用的 Linux 命令 Vim 编辑器基本操作  注册一个 Github 账号#Github 是一个在线的代码托管平台，使用 Github 你可以将自己的代码推送到服务器，或者从服务器下载代码。类似的平台还有 Gitee、GitBucket、Bitbucket 等，他们都支持 Git。此外你也可以自己搭建一个代码托管服务器。
为了我们后面学习过程中方便演练各种操作，需要你注册一个 Github 账号，或者使用你有的账号。
访问 GitHub: Where the world builds software · GitHub，点击 Sign up 按钮进入注册页面，填写必要的信息进行注册。
安装 Git#我们以 Linux（Ubuntu）系统为例。执行：
$ sudo apt-get install git -y 进行安装。
配置用户信息#之后你需要配置用户信息。执行：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://os-dev.incolore.net/posts/git-%E9%80%9F%E6%88%90%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/" />

<title>Git 速成入门指南 | 操作系统开发</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.134b70e5316650a530cb42e4e8630b2a01d532bebfc0337028211175336e4806.css" integrity="sha256-E0tw5TFmUKUwy0Lk6GMLKgHVMr6/wDNwKCERdTNuSAY=">
<script defer src="/en.search.min.7d6f73ecb8b11fffa116712d8ed207badfe87831f50ca32c2b2afd18e0caa422.js" integrity="sha256-fW9z7LixH/&#43;hFnEtjtIHut/oeDH1DKMsKyr9GODKpCI="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir=>
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/"><span>操作系统开发</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  <ul>
<li>1. 开发环境搭建
<ul>
<li><a href="/docs/1.1-virtualbox-%E7%9A%84%E5%AE%89%E8%A3%85/">1.1 VirtualBox 的安装</a></li>
<li><a href="/docs/1.2-%E5%9C%A8-virtualbox-%E5%AE%89%E8%A3%85-ubuntu-%E7%B3%BB%E7%BB%9F/">1.2 在 VirtualBox 安装 Ubuntu 系统</a></li>
<li><a href="/docs/1.3-%E4%B8%BA-ubuntu-%E8%A7%A3%E9%99%A4%E7%BD%91%E7%BB%9C%E5%B0%81%E9%94%81/">1.3 为 Ubuntu 解除网络封锁</a></li>
<li><a href="/docs/1.4-%E4%B8%BA-ubuntu-%E5%AE%89%E8%A3%85%E5%A2%9E%E5%BC%BA%E5%8A%9F%E8%83%BD/">1.4 为 Ubuntu 安装增强功能</a></li>
<li><a href="/docs/1.5-%E4%B8%BA-ubuntu-%E9%85%8D%E7%BD%AE-ssh-%E8%BF%9E%E6%8E%A5%E5%B9%B6%E5%AF%B9%E6%8E%A5-vscode/">1.5 为 Ubuntu 配置 SSH 连接并对接 VSCode</a></li>
<li><a href="/docs/1.6-%E5%9C%A8-ubuntu-%E4%B8%AD%E5%AE%89%E8%A3%85-bochs-%E8%99%9A%E6%8B%9F%E6%9C%BA/">1.6 在 Ubuntu 中安装 Bochs 虚拟机</a></li>
</ul>
</li>
<li>2. 引导原理与引导程序
<ul>
<li><a href="/docs/2.1-%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%BC%95%E5%AF%BC%E7%A8%8B%E5%BA%8F/">2.1 第一个引导程序</a></li>
<li><a href="/docs/2.2-fat-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/">2.2 FAT 文件系统</a></li>
</ul>
</li>
<li><a href="/posts/">Blog</a>
<ul>
<li><a href="/posts/%E4%B8%BB%E8%A6%81%E5%8F%82%E8%80%83/">主要参考</a></li>
<li><a href="/posts/windows-%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C/">Windows 基础操作</a></li>
<li><a href="/posts/git-%E9%80%9F%E6%88%90%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/"class=active>Git 速成入门指南</a></li>
<li><a href="/posts/bochs-%E8%B0%83%E8%AF%95%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">Bochs 调试常用命令</a></li>
</ul>
</li>
</ul>










</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Git 速成入门指南</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  <nav id="TableOfContents">
  <ul>
    <li><a href="#什么是-git">什么是 Git？</a></li>
    <li><a href="#前置知识">前置知识</a></li>
    <li><a href="#注册一个-github-账号">注册一个 Github 账号</a></li>
    <li><a href="#安装-git">安装 Git</a></li>
    <li><a href="#配置用户信息">配置用户信息</a></li>
    <li><a href="#配置代理">配置代理</a></li>
    <li><a href="#创建仓库">创建仓库</a></li>
    <li><a href="#添加文件">添加文件</a>
      <ul>
        <li><a href="#从工作目录到暂存区">从工作目录到暂存区</a></li>
        <li><a href="#从暂存区到本地仓库">从暂存区到本地仓库</a></li>
        <li><a href="#从本地仓库到远程仓库">从本地仓库到远程仓库</a></li>
        <li><a href="#向上推送小结">向上推送小结</a></li>
      </ul>
    </li>
    <li><a href="#修改文件并更新推送">修改文件并更新推送</a>
      <ul>
        <li><a href="#批量添加索引">批量添加索引</a></li>
        <li><a href="#撤销索引">撤销索引</a></li>
        <li><a href="#提交到本地仓库">提交到本地仓库</a></li>
        <li><a href="#撤销提交">撤销提交</a></li>
        <li><a href="#回档操作总结">回档操作总结</a></li>
        <li><a href="#查看提交历史">查看提交历史</a></li>
      </ul>
    </li>
    <li><a href="#拉取文件">拉取文件</a>
      <ul>
        <li><a href="#在-github-上添加文件">在 Github 上添加文件</a></li>
        <li><a href="#在-github-上修改文件">在 Github 上修改文件</a></li>
        <li><a href="#处理版本冲突">处理版本冲突</a></li>
      </ul>
    </li>
    <li><a href="#分支">分支</a>
      <ul>
        <li><a href="#复制代码库">复制代码库</a></li>
        <li><a href="#克隆仓库">克隆仓库</a></li>
        <li><a href="#查看有哪些分支">查看有哪些分支</a></li>
        <li><a href="#新增分支">新增分支</a></li>
        <li><a href="#重命名分支">重命名分支</a></li>
      </ul>
    </li>
    <li><a href="#参考">参考</a></li>
  </ul>
</nav>


  </aside>
  
 
      </header>

      
      
<article class="markdown">
  <h1>
    <a href="/posts/git-%E9%80%9F%E6%88%90%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/"></a>
  </h1>
  


  

  


  <p><p>由于网上的教程要么啰嗦，要么太过随意、太旧，所以写了这篇指南，尽可能取得实战能力、原理理解、学习效率的平衡。</p>
<h2 id="什么是-git">
  什么是 Git？
  <a class="anchor" href="#%e4%bb%80%e4%b9%88%e6%98%af-git">#</a>
</h2>
<p>Git 是一个文件管理工具，用于需要处理文件合并、更新等操作和这些操作的追踪。想象你在写一个程序，这个程序涉及到 A, B, C&hellip; 各个源代码文件，有一天，你修改了文件 C，然后重新发布了程序，突然你发现这个修改会导致严重的 BUG，你必须恢复到原来的文件，于是每次修改你都要把当时的源代码保存一遍，非常麻烦。或者假设有很多人帮助你开发这个程序，你就要手动合并他们提交的代码。有了 Git 之后，我们可以方便地管理代码的各个版本、管理其他人的合并等等。</p>
<h2 id="前置知识">
  前置知识
  <a class="anchor" href="#%e5%89%8d%e7%bd%ae%e7%9f%a5%e8%af%86">#</a>
</h2>
<p>学习之前，你需要知道：</p>
<ul>
<li>常用的 Linux 命令</li>
<li>Vim 编辑器基本操作</li>
</ul>
<h2 id="注册一个-github-账号">
  注册一个 Github 账号
  <a class="anchor" href="#%e6%b3%a8%e5%86%8c%e4%b8%80%e4%b8%aa-github-%e8%b4%a6%e5%8f%b7">#</a>
</h2>
<p>Github 是一个在线的代码托管平台，使用 Github 你可以将自己的代码推送到服务器，或者从服务器下载代码。类似的平台还有 Gitee、GitBucket、Bitbucket 等，他们都支持 Git。此外你也可以自己搭建一个代码托管服务器。</p>
<p>为了我们后面学习过程中方便演练各种操作，需要你注册一个 Github 账号，或者使用你有的账号。</p>
<p>访问 <a href="https://github.com/">GitHub: Where the world builds software · GitHub</a>，点击 <em>Sign up</em> 按钮进入注册页面，填写必要的信息进行注册。</p>
<h2 id="安装-git">
  安装 Git
  <a class="anchor" href="#%e5%ae%89%e8%a3%85-git">#</a>
</h2>
<p>我们以 Linux（Ubuntu）系统为例。执行：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ sudo apt-get install git -y
</code></pre></div><p>进行安装。</p>
<h2 id="配置用户信息">
  配置用户信息
  <a class="anchor" href="#%e9%85%8d%e7%bd%ae%e7%94%a8%e6%88%b7%e4%bf%a1%e6%81%af">#</a>
</h2>
<p>之后你需要配置用户信息。执行：</p>
<pre><code>$ git config --global user.name &quot;pluvet&quot;
$ git config --global user.email pluvet@foxmail.com
</code></pre><p>填写你自己的用户名和邮箱。这里的信息建议和你的 Github 账号一致。</p>
<h2 id="配置代理">
  配置代理
  <a class="anchor" href="#%e9%85%8d%e7%bd%ae%e4%bb%a3%e7%90%86">#</a>
</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ git config --global https.proxy http://192.168.56.1:10809

$ git config --global https.proxy http://192.168.56.1:10809
</code></pre></div><h2 id="创建仓库">
  创建仓库
  <a class="anchor" href="#%e5%88%9b%e5%bb%ba%e4%bb%93%e5%ba%93">#</a>
</h2>
<p>仓库（Repository）是被 Git 管理的一个目录。当一个目录变成仓库之后，我们可以在里面使用 Git 的命令跟踪文件的增减和变更。</p>
<p>我们创建一个文件夹，并进入它：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~$ mkdir learn-git
pluvet@localos:~$ cd learn-git/
</code></pre></div><p>然后我们在里面创建一个文件夹（作为仓库），并进入它：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git$ mkdir my-repo
pluvet@localos:~/learn-git$ cd my-repo/
</code></pre></div><p>这个时候，它还只是一个普通文件夹。要变成 Git 可管理的仓库，执行：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git/my-repo$ git init
Initialized empty Git repository in /home/pluvet/learn-git/my-repo/.git/
</code></pre></div><p>现在，仓库就初始化完毕了。</p>
<h2 id="添加文件">
  添加文件
  <a class="anchor" href="#%e6%b7%bb%e5%8a%a0%e6%96%87%e4%bb%b6">#</a>
</h2>
<h3 id="从工作目录到暂存区">
  从工作目录到暂存区
  <a class="anchor" href="#%e4%bb%8e%e5%b7%a5%e4%bd%9c%e7%9b%ae%e5%bd%95%e5%88%b0%e6%9a%82%e5%ad%98%e5%8c%ba">#</a>
</h3>
<p>创建一个文本文件：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git/my-repo$ vi hello.txt
</code></pre></div><p>写入内容：</p>
<pre><code>This is a sample file.
</code></pre><p>保存。现在 <code>hello.txt</code> 已经位于 <strong>工作目录（Working Directory）</strong> 了。</p>
<p>现在，要让 Git 仓库托管这个文件，需要使用 <code>add</code> 命令将其添加到<strong>暂存区（Stage，也叫索引）</strong>：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git/my-repo$ git add hello.txt
</code></pre></div><blockquote>
<p><strong>添加命令</strong>：添加一个或者多个文件到索引（暂存区）。</p>
<p><code>git add &lt;filename&gt;</code></p>
<p><code>git add *</code></p>
</blockquote>
<h3 id="从暂存区到本地仓库">
  从暂存区到本地仓库
  <a class="anchor" href="#%e4%bb%8e%e6%9a%82%e5%ad%98%e5%8c%ba%e5%88%b0%e6%9c%ac%e5%9c%b0%e4%bb%93%e5%ba%93">#</a>
</h3>
<p>下面将代码从暂存区提交到本地仓库：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git/my-repo$ git commit -m <span style="color:#e6db74">&#34;add: hello.txt&#34;</span>
<span style="color:#f92672">[</span>master <span style="color:#f92672">(</span>root-commit<span style="color:#f92672">)</span> 9ec197f<span style="color:#f92672">]</span> add: hello.txt
 <span style="color:#ae81ff">1</span> file changed, <span style="color:#ae81ff">1</span> insertion<span style="color:#f92672">(</span>+<span style="color:#f92672">)</span>
 create mode <span style="color:#ae81ff">100644</span> hello.txt
</code></pre></div><blockquote>
<p><strong>提交命令</strong>：将变更提交到本地仓库。</p>
<p><code>git commit -m &quot;提交说明&quot;</code></p>
</blockquote>
<h3 id="从本地仓库到远程仓库">
  从本地仓库到远程仓库
  <a class="anchor" href="#%e4%bb%8e%e6%9c%ac%e5%9c%b0%e4%bb%93%e5%ba%93%e5%88%b0%e8%bf%9c%e7%a8%8b%e4%bb%93%e5%ba%93">#</a>
</h3>
<p>下面还可以继续提交到远程仓库。不过，我们还没有一个远程仓库。现在我们创建一个。</p>
<p>访问 <a href="https://github.com/new">Create a New Repository (github.com)</a>，如下图填写仓库名称，点击 <em>Create repository</em>：</p>
<p><img src="https://cdn.jsdelivr.net/gh/pluveto/0images@master/20210125/image-20210123202526626.p0riwkgu5k0.png" alt="image-20210123202526626" /></p>
<p>片刻之后可以看到创建好的仓库。我们复制仓库的地址：</p>
<p><img src="https://cdn.jsdelivr.net/gh/pluveto/0images@master/20210125/image-20210123202616772.png" alt="image-20210123202616772" /></p>
<p>执行：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git/my-repo$ git remote add origin https://github.com/pluveto/my-repo-1.git
</code></pre></div><p>即可添加远程仓库，为这个远程仓库 <code>https://github.com/pluveto/my-repo-1.git</code> 取<strong>别名</strong>为 <code>origin</code>。</p>
<p>执行：</p>
<pre><code>git push --set-upstream origin master
</code></pre><p>即可推送到远程仓库。其中 <code>--set-upstream origin master</code> 表示设定 <code>origin</code> 为上游仓库（注意：<code>origin</code>表示的是远程仓库，是我们上一步自己取的名字），而后面的 <code>master</code> 是 <code>git push</code> 的参数。之所以要设置 <strong>上游仓库</strong> 是为了保证 Git 知道要推送到哪里。因为 <strong>一个代码库可以推送到多个上游</strong>，比如你可以推送到 Gitee 和 Github。当设置了一次上游仓库，以后再执行推送，就不用指名了，就默认用第一次设置的了。也就是以后推送就可以执行：</p>
<pre><code>git push --set-upstream origin master
</code></pre><blockquote>
<p>有的说法是<strong>上游分支</strong>，但是这个说法不准确，因为后面的一个仓库里面也有不同的分支（branch），所以还是叫上游仓库不会误导读者。</p>
</blockquote>
<blockquote>
<p><strong>推送命令</strong>：将本地仓库推送到远程仓库。</p>
<p><code>git push origin master</code></p>
<p><code>origin</code> 是上游仓库名，<code>master</code> 是推送的分支名。这条命令可以省略为：<code>git push</code></p>
</blockquote>
<h3 id="向上推送小结">
  向上推送小结
  <a class="anchor" href="#%e5%90%91%e4%b8%8a%e6%8e%a8%e9%80%81%e5%b0%8f%e7%bb%93">#</a>
</h3>
<p>现在我们总结一下：</p>
<ol>
<li>创建文件后，文件保存在 <strong>工作目录</strong>。</li>
<li>通过 <code>add</code> 命令，<strong>添加</strong>文件到 <strong>暂存区</strong>。</li>
<li>通过 <code>commit</code> 命令，<strong>提交</strong>文件到 <strong>本地仓库</strong>。</li>
<li>通过 <code>push</code> 命令，<strong>推送</strong>文件到 <strong>远程仓库</strong>。</li>
</ol>
<p>请记住三个区、远程仓库的关系：工作目录→暂存区→本地仓库→远程仓库</p>
<p>在浏览器访问你的仓库链接，可以看到：</p>
<p><img src="https://cdn.jsdelivr.net/gh/pluveto/0images@master/20210125/image-20210123204755362.png" alt="image-20210123204755362" /></p>
<p>点进 <code>hello.txt</code> 可以看到里面的内容：</p>
<p><img src="https://cdn.jsdelivr.net/gh/pluveto/0images@master/20210125/image-20210123204827284.png" alt="image-20210123204827284" /></p>
<h2 id="修改文件并更新推送">
  修改文件并更新推送
  <a class="anchor" href="#%e4%bf%ae%e6%94%b9%e6%96%87%e4%bb%b6%e5%b9%b6%e6%9b%b4%e6%96%b0%e6%8e%a8%e9%80%81">#</a>
</h2>
<p>创建文件 <code>empty.c</code>，写入：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() { <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>; }
</code></pre></div><p>创建文件 <code>empty.html</code>，写入：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">html</span>&gt;   
&lt;/<span style="color:#f92672">html</span>&gt;
</code></pre></div><p>现在我们的工作目录有这些文件：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git/my-repo$ ls -a
.  ..  empty.c  empty.html  .git  hello.txt
</code></pre></div><h3 id="批量添加索引">
  批量添加索引
  <a class="anchor" href="#%e6%89%b9%e9%87%8f%e6%b7%bb%e5%8a%a0%e7%b4%a2%e5%bc%95">#</a>
</h3>
<p>因为我们新增了两个文件，所以把它们添加到索引：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git/my-repo$ git add .
</code></pre></div><blockquote>
<p><code>git add .</code> 表示将<strong>当前目录的所有文件</strong>都添加到暂存区（除了 <code>.gitignore</code> 中排除的文件，关于 <code>.gitignore</code> 的用法，将会在后续讲到）</p>
</blockquote>
<p>现在，执行 <code>git status</code>，可以看到：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git/my-repo$ git status
On branch master
Your branch is up to date with <span style="color:#e6db74">&#39;origin/master&#39;</span>.

Changes to be committed:
  <span style="color:#f92672">(</span>use <span style="color:#e6db74">&#34;git restore --staged &lt;file&gt;...&#34;</span> to unstage<span style="color:#f92672">)</span>
        new file:   empty.c
        new file:   empty.html
</code></pre></div><p>需要提醒的是，<code>git add .</code> 只作用于当前已有的文件。如果我们新建一个空文件，名为 <code>undo</code>：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git/my-repo$ touch undo
pluvet@localos:~/learn-git/my-repo$ git status
On branch master
Your branch is up to date with <span style="color:#e6db74">&#39;origin/master&#39;</span>.

Changes to be committed:
  <span style="color:#f92672">(</span>use <span style="color:#e6db74">&#34;git restore --staged &lt;file&gt;...&#34;</span> to unstage<span style="color:#f92672">)</span>
        new file:   empty.c
        new file:   empty.html

Untracked files:
  <span style="color:#f92672">(</span>use <span style="color:#e6db74">&#34;git add &lt;file&gt;...&#34;</span> to include in what will be committed<span style="color:#f92672">)</span>
        undo
</code></pre></div><p>你会看到，<code>undo</code> 位列 <em>Untracked files</em> 名单之中，也就是没有被索引。所以我们要添加到索引：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git/my-repo$ git add undo
pluvet@localos:~/learn-git/my-repo$ git status
On branch master
Your branch is up to date with <span style="color:#e6db74">&#39;origin/master&#39;</span>.

Changes to be committed:
  <span style="color:#f92672">(</span>use <span style="color:#e6db74">&#34;git restore --staged &lt;file&gt;...&#34;</span> to unstage<span style="color:#f92672">)</span>
        new file:   empty.c
        new file:   empty.html
        new file:   undo
</code></pre></div><h3 id="撤销索引">
  撤销索引
  <a class="anchor" href="#%e6%92%a4%e9%94%80%e7%b4%a2%e5%bc%95">#</a>
</h3>
<p>现在我们反悔了，不想索引 <code>undo</code> 文件了，怎么办？执行：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git/my-repo$ git reset undo
pluvet@localos:~/learn-git/my-repo$ git status
On branch master
Your branch is up to date with <span style="color:#e6db74">&#39;origin/master&#39;</span>.

Changes to be committed:
  <span style="color:#f92672">(</span>use <span style="color:#e6db74">&#34;git restore --staged &lt;file&gt;...&#34;</span> to unstage<span style="color:#f92672">)</span>
        new file:   empty.c
        new file:   empty.html

Untracked files:
  <span style="color:#f92672">(</span>use <span style="color:#e6db74">&#34;git add &lt;file&gt;...&#34;</span> to include in what will be committed<span style="color:#f92672">)</span>
        undo
</code></pre></div><blockquote>
<p><strong>重置命令</strong>：回退命令。</p>
<p><code>git reset &lt;filename&gt;</code></p>
</blockquote>
<h3 id="提交到本地仓库">
  提交到本地仓库
  <a class="anchor" href="#%e6%8f%90%e4%ba%a4%e5%88%b0%e6%9c%ac%e5%9c%b0%e4%bb%93%e5%ba%93">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git/my-repo$ git commit -m <span style="color:#e6db74">&#34;add: two empty source files&#34;</span>
</code></pre></div><h3 id="撤销提交">
  撤销提交
  <a class="anchor" href="#%e6%92%a4%e9%94%80%e6%8f%90%e4%ba%a4">#</a>
</h3>
<p>这个时候我们发现代码需要修改，想撤销提交，怎么办？执行：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git/my-repo$ git reset --soft HEAD^
</code></pre></div><h3 id="回档操作总结">
  回档操作总结
  <a class="anchor" href="#%e5%9b%9e%e6%a1%a3%e6%93%8d%e4%bd%9c%e6%80%bb%e7%bb%93">#</a>
</h3>
<p>你可能会疑问：前面撤销 <code>add</code> 操作，和这里撤销 <code>commit</code>，用的都是 <code>reset</code> ，区别何在？</p>
<p>我们先解释一下命令参数的含义。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ git reset 某个版本 某个文件
</code></pre></div><p>表示重置到”某个版本“。当”某个版本“不填写的时候，就默认是 <code>HEAD</code>. 某个文件就默认是 <code>.</code>，即当前目录所有文件。</p>
<p><code>HEAD</code> 表示当前版本。</p>
<blockquote>
<p><strong>HEAD 说明：</strong></p>
<ul>
<li>
<p>HEAD 表示当前版本</p>
</li>
<li>
<p>HEAD^ 上一个版本</p>
</li>
<li>
<p>HEAD^^ 上上一个版本</p>
</li>
<li>
<p>HEAD^^^ 上上上一个版本</p>
</li>
<li>
<p>以此类推&hellip;</p>
</li>
</ul>
<p>可以使用 ～数字表示</p>
<ul>
<li>HEAD~0 表示当前版本</li>
<li>HEAD~1 上一个版本</li>
<li>HEAD^2 上上一个版本</li>
<li>HEAD^3 上上上一个版本</li>
<li>以此类推&hellip;</li>
</ul>
<p>其实 HEAD 就是链表的<strong>头指针</strong>，指向当前的 <code>commit</code>。</p>
</blockquote>
<h4 id="当我们撤销-add-的时候">
  当我们撤销 add 的时候
  <a class="anchor" href="#%e5%bd%93%e6%88%91%e4%bb%ac%e6%92%a4%e9%94%80-add-%e7%9a%84%e6%97%b6%e5%80%99">#</a>
</h4>
<p><code>git reset</code>：相当于 <code>git reset HEAD .</code>，即：回退所有文件到当前版本，清空暂存区。</p>
<pre><code>工作目录→暂存区→本地仓库→远程仓库
           ↑
        作用最深位置
</code></pre><h4 id="当我们撤销-commit-的时候">
  当我们撤销 commit 的时候
  <a class="anchor" href="#%e5%bd%93%e6%88%91%e4%bb%ac%e6%92%a4%e9%94%80-commit-%e7%9a%84%e6%97%b6%e5%80%99">#</a>
</h4>
<p><code>git reset --soft HEAD~1</code>：相当于 <code>git reset --soft HEAD~1 .</code>，即回退所有文件到当前版本，但是不清空暂存区。也就是暂存区 add 的文件都还在。</p>
<pre><code>工作目录→暂存区→本地仓库→远程仓库
                 ↑
              作用最深位置
</code></pre><h4 id="当我们使用---hard-参数的时候">
  当我们使用 &ndash;hard 参数的时候
  <a class="anchor" href="#%e5%bd%93%e6%88%91%e4%bb%ac%e4%bd%bf%e7%94%a8---hard-%e5%8f%82%e6%95%b0%e7%9a%84%e6%97%b6%e5%80%99">#</a>
</h4>
<p><code>git reset --hard HEAD~1</code>：相当于 <code>git reset --hard HEAD~1 .</code>，即回退所有文件到当前版本，并且连暂存区、工作目录的文件也一并回档。</p>
<pre><code>工作目录→暂存区→本地仓库→远程仓库
    ↑
作用最深位置
</code></pre><p>这种操作在以后撤回 <code>merge</code> 的时候也会用到。</p>
<h3 id="查看提交历史">
  查看提交历史
  <a class="anchor" href="#%e6%9f%a5%e7%9c%8b%e6%8f%90%e4%ba%a4%e5%8e%86%e5%8f%b2">#</a>
</h3>
<p>现在，重新添加上两个文件，并提交。然后执行：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git/my-repo$ git log
commit 3e19b2abb94d4c579023acccb300b53b186fcdde <span style="color:#f92672">(</span>HEAD -&gt; master<span style="color:#f92672">)</span>
Author: Pluveto &lt;receding@protonmail.ccom&gt;
Date:   Sun Jan <span style="color:#ae81ff">24</span> 12:12:07 <span style="color:#ae81ff">2021</span> +0800

    add: two empty source files

commit 9ec197f9b29bc6b5f432e4f90bd389372a73747d <span style="color:#f92672">(</span>origin/master<span style="color:#f92672">)</span>
Author: Pluveto &lt;receding@protonmail.ccom&gt;
Date:   Sat Jan <span style="color:#ae81ff">23</span> 20:20:56 <span style="color:#ae81ff">2021</span> +0800

    add: hello.txt

</code></pre></div><p>可以看到提交的历史。<code>git log</code> 的详细用法，见：<a href="https://git-scm.com/book/zh/v2/Git-%e5%9f%ba%e7%a1%80-%e6%9f%a5%e7%9c%8b%e6%8f%90%e4%ba%a4%e5%8e%86%e5%8f%b2">Git - 查看提交历史 (git-scm.com)</a>。</p>
<p>之后，我们推送到服务器：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git/my-repo$ git push
Enumerating objects: 5, <span style="color:#66d9ef">done</span>.
Counting objects: 100% <span style="color:#f92672">(</span>5/5<span style="color:#f92672">)</span>, <span style="color:#66d9ef">done</span>.
Compressing objects: 100% <span style="color:#f92672">(</span>2/2<span style="color:#f92672">)</span>, <span style="color:#66d9ef">done</span>.
Writing objects: 100% <span style="color:#f92672">(</span>4/4<span style="color:#f92672">)</span>, <span style="color:#ae81ff">368</span> bytes | 368.00 KiB/s, <span style="color:#66d9ef">done</span>.
Total <span style="color:#ae81ff">4</span> <span style="color:#f92672">(</span>delta 0<span style="color:#f92672">)</span>, reused <span style="color:#ae81ff">0</span> <span style="color:#f92672">(</span>delta 0<span style="color:#f92672">)</span>, pack-reused <span style="color:#ae81ff">0</span>
To https://github.com/pluveto/my-repo-1.git
   9ec197f..3e19b2a  master -&gt; master
</code></pre></div><blockquote>
<p>这里，<code>git push</code> 是 <code>git push origin master</code> 的缩写。<code>origin</code> 是我们给远程仓库取的名。<code>master</code> 是我们推送分支的名。</p>
</blockquote>
<h2 id="拉取文件">
  拉取文件
  <a class="anchor" href="#%e6%8b%89%e5%8f%96%e6%96%87%e4%bb%b6">#</a>
</h2>
<h3 id="在-github-上添加文件">
  在 Github 上添加文件
  <a class="anchor" href="#%e5%9c%a8-github-%e4%b8%8a%e6%b7%bb%e5%8a%a0%e6%96%87%e4%bb%b6">#</a>
</h3>
<p>在 Github 上访问我们的仓库：</p>
<p><img src="https://cdn.jsdelivr.net/gh/pluveto/0images@master/20210125/image-20210124122250183.png" alt="image-20210124122250183" /></p>
<p>点击上面的 <em>Add file</em> 按钮，新增一个文件，名为 <code>README.md</code>。内容自己写~</p>
<p><img src="https://cdn.jsdelivr.net/gh/pluveto/0images@master/20210125/image-20210124122418463.png" alt="image-20210124122418463" /></p>
<p>然后在下方提交：</p>
<p><img src="https://cdn.jsdelivr.net/gh/pluveto/0images@master/20210125/image-20210124122438616.png" alt="image-20210124122438616" /></p>
<p>你可以发现，实际上 github 帮助你创建了文件，然后帮你 add 和 commit 你编辑好的文件。和我们用命令操作是一样的。</p>
<h3 id="在-github-上修改文件">
  在 Github 上修改文件
  <a class="anchor" href="#%e5%9c%a8-github-%e4%b8%8a%e4%bf%ae%e6%94%b9%e6%96%87%e4%bb%b6">#</a>
</h3>
<p>点击 <code>hello,txt</code>：</p>
<p><img src="https://cdn.jsdelivr.net/gh/pluveto/0images@master/20210125/image-20210124122606621.png" alt="image-20210124122606621" /></p>
<p>点击编辑按钮：</p>
<p><img src="https://cdn.jsdelivr.net/gh/pluveto/0images@master/20210125/image-20210124122644660.png" alt="image-20210124122644660" /></p>
<p>往里面写一句话，然后提交：</p>
<p><img src="https://cdn.jsdelivr.net/gh/pluveto/0images@master/20210125/image-20210124122738294.4ke3gwxr95a0.png" alt="image-20210124122738294" /></p>
<h3 id="处理版本冲突">
  处理版本冲突
  <a class="anchor" href="#%e5%a4%84%e7%90%86%e7%89%88%e6%9c%ac%e5%86%b2%e7%aa%81">#</a>
</h3>
<p>现在，把 <code>undo</code> 文件也添加进来：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git/my-repo$ git add undo
</code></pre></div><p>并提交到本地仓库：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git/my-repo$ git commit -m <span style="color:#e6db74">&#34;add: undo&#34;</span>
<span style="color:#f92672">[</span>master 2d3b5d3<span style="color:#f92672">]</span> add: undo
 <span style="color:#ae81ff">1</span> file changed, <span style="color:#ae81ff">0</span> insertions<span style="color:#f92672">(</span>+<span style="color:#f92672">)</span>, <span style="color:#ae81ff">0</span> deletions<span style="color:#f92672">(</span>-<span style="color:#f92672">)</span>
 create mode <span style="color:#ae81ff">100644</span> undo
</code></pre></div><p>然后推送到远程仓库：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git/my-repo$ git push
To https://github.com/pluveto/my-repo-1.git
 ! <span style="color:#f92672">[</span>rejected<span style="color:#f92672">]</span>        master -&gt; master <span style="color:#f92672">(</span>fetch first<span style="color:#f92672">)</span>
error: failed to push some refs to <span style="color:#e6db74">&#39;https://github.com/pluveto/my-repo-1.git&#39;</span>
hint: Updates were rejected because the remote contains work that you <span style="color:#66d9ef">do</span>
hint: not have locally. This is usually caused by another repository pushing
hint: to the same ref. You may want to first integrate the remote changes
hint: <span style="color:#f92672">(</span>e.g., <span style="color:#e6db74">&#39;git pull ...&#39;</span><span style="color:#f92672">)</span> before pushing again.
hint: See the <span style="color:#e6db74">&#39;Note about fast-forwards&#39;</span> in <span style="color:#e6db74">&#39;git push --help&#39;</span> <span style="color:#66d9ef">for</span> details.
</code></pre></div><p>看，报错了。这是因为产生了冲突。我们分析一下冲突如何产生的：</p>
<ol>
<li>假设本来的版本是 A</li>
<li>你在 Github 网站上进行了两次提交，版本变成了 B，然后变成了 C。</li>
<li>你在本地仓库上进行了一次提交，版本从 A 变成了 D</li>
<li>而你想把 D 推送到远程仓库，远程仓库的上一版本已经不是 A 了，冲突。</li>
</ol>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->A<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->A<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->B<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->B<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->C<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->C<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->D<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->D<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->Viewer does not support full SVG 1.1<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p>我们执行：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git/my-repo$ git fetch
remote: Enumerating objects: 8, <span style="color:#66d9ef">done</span>.
remote: Counting objects: 100% <span style="color:#f92672">(</span>8/8<span style="color:#f92672">)</span>, <span style="color:#66d9ef">done</span>.
remote: Compressing objects: 100% <span style="color:#f92672">(</span>4/4<span style="color:#f92672">)</span>, <span style="color:#66d9ef">done</span>.
remote: Total <span style="color:#ae81ff">6</span> <span style="color:#f92672">(</span>delta 1<span style="color:#f92672">)</span>, reused <span style="color:#ae81ff">0</span> <span style="color:#f92672">(</span>delta 0<span style="color:#f92672">)</span>, pack-reused <span style="color:#ae81ff">0</span>
Unpacking objects: 100% <span style="color:#f92672">(</span>6/6<span style="color:#f92672">)</span>, 1.35 KiB | 1.35 MiB/s, <span style="color:#66d9ef">done</span>.
From https://github.com/pluveto/my-repo-1
   3e19b2a..176332b  master     -&gt; origin/master
</code></pre></div><p>这里 <code>git fetch</code> 是 <code>git fetch orgin</code> 的缩写，后者也是 <code>git fetch orgin/master</code> 的缩写。</p>
<p>发生了什么？<code>orgin</code> 是远程代码库，<code>master</code> 是操作的分支。执行这个命令，就是从名（alias）为 <code>origin</code> 的远程仓库的 <code>master</code> 分支拉取数据到本地代码库的 <code>master</code> 分支。</p>
<p>然后我们执行：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git/my-repo$ git merge
Merge made by the <span style="color:#e6db74">&#39;recursive&#39;</span> strategy.
 README.md | <span style="color:#ae81ff">3</span> +++
 hello.txt | <span style="color:#ae81ff">2</span> ++
 <span style="color:#ae81ff">2</span> files changed, <span style="color:#ae81ff">5</span> insertions<span style="color:#f92672">(</span>+<span style="color:#f92672">)</span>
 create mode <span style="color:#ae81ff">100644</span> README.md
</code></pre></div><p>将刚才下载到本地仓库的文件合并到我们的工作目录。可以观察 <code>merge</code> 前后的文件结构：</p>
<p><img src="https://cdn.jsdelivr.net/gh/pluveto/0images@master/20210125/image-20210124134349618.png" alt="image-20210124134349618" /></p>
<p>发生了什么呢？<code>git merge</code> 是 <code>git merge HEAD</code> 的缩写。表示将指定的分支（HEAD，现在表示从远程下载过来的 master 分支）合并到当前的分支（本地的 master 分支）。</p>
<blockquote>
<p>注：执行 <code>git merge</code> 之后，你可能会看到下面的界面：</p>
<p><img src="https://cdn.jsdelivr.net/gh/pluveto/0images@master/20210125/image-20210124133038396.png" alt="image-20210124133038396" /></p>
<p>这是 nano 编辑器。下面两行显示了操作，<code>^X</code> 就表示 <em>Ctrl+X</em>。之所以会出现这个，是要你在里面写上 Merge 操作的原因。我们按下 <em>Ctrl+O</em> 保存，在出现的框中，回车确认文件名，然后 <em>Ctrl+X</em> 退出即可。</p>
</blockquote>
<p>有时候我们会误操作，如何回撤 Merge 呢？执行 <code>git reset --hard HEAD~1</code> 即可（前面回档操作介绍过）。执行之后，<code>merge</code> 下来的文件也会被删除。</p>
<p>现在 <code>merge</code> 之后，冲突已经不存在了。（其实还有一种比较麻烦的情况，就是远程和本地都同时修改了同一个文件，这个时候需要<strong>手动处理冲突</strong>，在后续章节将会说明。）</p>
<p>然后，我们就可以 <code>push</code> 到远程仓库了：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git/my-repo$ git push
Enumerating objects: 7, <span style="color:#66d9ef">done</span>.
Counting objects: 100% <span style="color:#f92672">(</span>7/7<span style="color:#f92672">)</span>, <span style="color:#66d9ef">done</span>.
Compressing objects: 100% <span style="color:#f92672">(</span>4/4<span style="color:#f92672">)</span>, <span style="color:#66d9ef">done</span>.
Writing objects: 100% <span style="color:#f92672">(</span>5/5<span style="color:#f92672">)</span>, <span style="color:#ae81ff">553</span> bytes | 553.00 KiB/s, <span style="color:#66d9ef">done</span>.
Total <span style="color:#ae81ff">5</span> <span style="color:#f92672">(</span>delta 2<span style="color:#f92672">)</span>, reused <span style="color:#ae81ff">0</span> <span style="color:#f92672">(</span>delta 0<span style="color:#f92672">)</span>, pack-reused <span style="color:#ae81ff">0</span>
remote: Resolving deltas: 100% <span style="color:#f92672">(</span>2/2<span style="color:#f92672">)</span>, completed with <span style="color:#ae81ff">2</span> local objects.
To https://github.com/pluveto/my-repo-1.git
   176332b..0092920  master -&gt; master
</code></pre></div><p>新增的 <code>undo</code> 文件在 Github 上可以看到了：</p>
<p><img src="https://cdn.jsdelivr.net/gh/pluveto/0images@master/20210125/image-20210124133630174.png" alt="image-20210124133630174" /></p>
<p>总结一下，我们是如何解决冲突的：</p>
<ol>
<li><code>git fetch</code> 下载到本地仓库。</li>
<li><code>git merge</code> 将新代码和旧代码合并。</li>
<li><code>git push</code> 推送合并后的代码。</li>
</ol>
<p>其中，<code>git fetch</code> 和 <code>git merge</code>  可以简写为一条指令：<code>git pull</code>。</p>
<p>这里，我们已经初步接触了 Git 的分支的概念。下面将深入学习分支。</p>
<h2 id="分支">
  分支
  <a class="anchor" href="#%e5%88%86%e6%94%af">#</a>
</h2>
<p>有时候，你的软件需要增加一些功能，而增加这个功能需要多次提交代码。为了不影响现有的产品，就可以建立一个分支，等开发、测试完毕了，再合并到主干。现在，让我们从一个现有的代码库开始。</p>
<h3 id="复制代码库">
  复制代码库
  <a class="anchor" href="#%e5%a4%8d%e5%88%b6%e4%bb%a3%e7%a0%81%e5%ba%93">#</a>
</h3>
<p>访问 <a href="https://github.com/incolore-team/asc-table">incolore-team/asc-table: This repo is for learning git (github.com)</a>，你将会看到一个现有的代码库。但是你对其没有控制权。点击右上角的 <em>Fork</em>：</p>
<p><img src="https://cdn.jsdelivr.net/gh/pluveto/0images@master/20210125/image-20210124143517114.png" alt="image-20210124143517114" /></p>
<p>等待 Fork 完成：</p>
<p><img src="https://cdn.jsdelivr.net/gh/pluveto/0images@master/20210125/image-20210124143600607.png" alt="image-20210124143600607" /></p>
<p>将会将这个仓库复制一份到你的名下：</p>
<p><img src="https://cdn.jsdelivr.net/gh/pluveto/0images@master/20210125/image-20210124143636518.png" alt="image-20210124143636518" /></p>
<h3 id="克隆仓库">
  克隆仓库
  <a class="anchor" href="#%e5%85%8b%e9%9a%86%e4%bb%93%e5%ba%93">#</a>
</h3>
<p>现在复制到你名下的仓库，你是有控制权的。我们如何在本机上编辑这个代码库的代码呢？点击 <em>↓ Code</em> 按钮，复制里面的链接：</p>
<p><img src="https://cdn.jsdelivr.net/gh/pluveto/0images@master/20210125/image-20210124143853890.png" alt="image-20210124143853890" /></p>
<p>然后执行：</p>
<pre><code>pluvet@localos:~/learn-git$ git clone https://github.com/pluveto/asc-table.git
Cloning into 'asc-table'...
remote: Enumerating objects: 4, done.
remote: Counting objects: 100% (4/4), done.
remote: Compressing objects: 100% (3/3), done.
remote: Total 4 (delta 0), reused 4 (delta 0), pack-reused 0
Unpacking objects: 100% (4/4), 471 bytes | 471.00 KiB/s, done.
</code></pre><blockquote>
<p><strong>克隆指令</strong>：将远程代码仓库下载到本地。</p>
<p><code>git clone &lt;url&gt;</code></p>
</blockquote>
<p>进入克隆下来的工作目录：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git$ cd asc-table/
</code></pre></div><p>列出文件：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git/asc-table$ ls -al
total <span style="color:#ae81ff">20</span>
drwxrwxr-x <span style="color:#ae81ff">3</span> pluvet pluvet <span style="color:#ae81ff">4096</span>  1月 <span style="color:#ae81ff">24</span> 14:39 .
drwxrwxr-x <span style="color:#ae81ff">4</span> pluvet pluvet <span style="color:#ae81ff">4096</span>  1月 <span style="color:#ae81ff">24</span> 14:39 ..
drwxrwxr-x <span style="color:#ae81ff">8</span> pluvet pluvet <span style="color:#ae81ff">4096</span>  1月 <span style="color:#ae81ff">24</span> 14:39 .git
-rw-rw-r-- <span style="color:#ae81ff">1</span> pluvet pluvet    <span style="color:#ae81ff">5</span>  1月 <span style="color:#ae81ff">24</span> 14:39 .gitignore
-rw-rw-r-- <span style="color:#ae81ff">1</span> pluvet pluvet  <span style="color:#ae81ff">453</span>  1月 <span style="color:#ae81ff">24</span> 14:39 program.cpp
</code></pre></div><p>可以看到一个 <code>.git</code> 目录，一个 <code>.gitignore</code> 文件，以及 <code>program.cpp</code> 文件。</p>
<p>关于 <code>.git</code> 目录，涉及到 Git 的底层原理，感兴趣的可以阅读：<a href="https://git-scm.com/book/zh/v2/Git-%e5%86%85%e9%83%a8%e5%8e%9f%e7%90%86-%e5%ba%95%e5%b1%82%e5%91%bd%e4%bb%a4%e4%b8%8e%e4%b8%8a%e5%b1%82%e5%91%bd%e4%bb%a4">Git - 底层命令与上层命令 (git-scm.com)</a></p>
<p><code>.gitignore</code> 文件表示在 <code>git add</code> 时忽略的文件，一般会写入一些临时文件、临时文件夹等。关于编写这个文件的规则，你可以阅读：<a href="https://git-scm.com/docs/gitignore">Git - gitignore Documentation (git-scm.com)</a></p>
<p>我们查看这个文件的内容：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git/asc-table$ cat .gitignore 
a.out
</code></pre></div><p>里面写了 <code>a.out</code> ，说明忽略 <code>a.out</code> 这个文件。</p>
<h3 id="查看有哪些分支">
  查看有哪些分支
  <a class="anchor" href="#%e6%9f%a5%e7%9c%8b%e6%9c%89%e5%93%aa%e4%ba%9b%e5%88%86%e6%94%af">#</a>
</h3>
<p>执行：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git/asc-table$ git branch
* main
</code></pre></div><h3 id="新增分支">
  新增分支
  <a class="anchor" href="#%e6%96%b0%e5%a2%9e%e5%88%86%e6%94%af">#</a>
</h3>
<p>执行：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git/asc-table$ git branch br1
pluvet@localos:~/learn-git/asc-table$ git branch
  br1
* main

</code></pre></div><h3 id="重命名分支">
  重命名分支
  <a class="anchor" href="#%e9%87%8d%e5%91%bd%e5%90%8d%e5%88%86%e6%94%af">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git/asc-table$ git branch -m br1 branch_1
pluvet@localos:~/learn-git/asc-table$ git branch 
branch_1
* main
</code></pre></div><p>为当前分支重命名，则是：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pluvet@localos:~/learn-git/asc-table$ git branch -M main
</code></pre></div><h2 id="参考">
  参考
  <a class="anchor" href="#%e5%8f%82%e8%80%83">#</a>
</h2>
<p><a href="http://github.phodal.com/">GitHub 漫游指南 – GitHub 漫游指南 (phodal.com)</a></p>
<p><a href="https://www.lanqiao.cn/courses/1035">Git 与 GitHub 入门实践_Git - 蓝桥云课 (lanqiao.cn)</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/98679880">手撕Git，告别盲目记忆 - 知乎 (zhihu.com)</a></p>
<p><a href="https://stackoverflow.com/questions/18031946/what-does-set-upstream-do">git - What does &lsquo;&ndash;set-upstream&rsquo; do? - Stack Overflow</a></p>
<p><a href="https://www.zhihu.com/question/27712995">Git 里面的 origin 到底代表啥意思? - 知乎 (zhihu.com)</a></p>
<p><a href="https://devconnected.com/how-to-set-upstream-branch-on-git/">How To Set Upstream Branch on Git – devconnected</a></p>
<p><a href="https://www.liaoxuefeng.com/wiki/896043488029600/896827951938304">创建版本库 - 廖雪峰的官方网站 (liaoxuefeng.com)</a></p>
<p><a href="https://confluence.atlassian.com/bitbucketserver/basic-git-commands-776639767.html">Basic Git commands | Bitbucket Data Center and Server 7.9 | Atlassian Documentation</a></p>
</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#什么是-git">什么是 Git？</a></li>
    <li><a href="#前置知识">前置知识</a></li>
    <li><a href="#注册一个-github-账号">注册一个 Github 账号</a></li>
    <li><a href="#安装-git">安装 Git</a></li>
    <li><a href="#配置用户信息">配置用户信息</a></li>
    <li><a href="#配置代理">配置代理</a></li>
    <li><a href="#创建仓库">创建仓库</a></li>
    <li><a href="#添加文件">添加文件</a>
      <ul>
        <li><a href="#从工作目录到暂存区">从工作目录到暂存区</a></li>
        <li><a href="#从暂存区到本地仓库">从暂存区到本地仓库</a></li>
        <li><a href="#从本地仓库到远程仓库">从本地仓库到远程仓库</a></li>
        <li><a href="#向上推送小结">向上推送小结</a></li>
      </ul>
    </li>
    <li><a href="#修改文件并更新推送">修改文件并更新推送</a>
      <ul>
        <li><a href="#批量添加索引">批量添加索引</a></li>
        <li><a href="#撤销索引">撤销索引</a></li>
        <li><a href="#提交到本地仓库">提交到本地仓库</a></li>
        <li><a href="#撤销提交">撤销提交</a></li>
        <li><a href="#回档操作总结">回档操作总结</a></li>
        <li><a href="#查看提交历史">查看提交历史</a></li>
      </ul>
    </li>
    <li><a href="#拉取文件">拉取文件</a>
      <ul>
        <li><a href="#在-github-上添加文件">在 Github 上添加文件</a></li>
        <li><a href="#在-github-上修改文件">在 Github 上修改文件</a></li>
        <li><a href="#处理版本冲突">处理版本冲突</a></li>
      </ul>
    </li>
    <li><a href="#分支">分支</a>
      <ul>
        <li><a href="#复制代码库">复制代码库</a></li>
        <li><a href="#克隆仓库">克隆仓库</a></li>
        <li><a href="#查看有哪些分支">查看有哪些分支</a></li>
        <li><a href="#新增分支">新增分支</a></li>
        <li><a href="#重命名分支">重命名分支</a></li>
      </ul>
    </li>
    <li><a href="#参考">参考</a></li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












